#!/usr/bin/env ruby

require 'rubygems'
require 'bundler/setup'


localhost = `hostname`.chomp
debug = localhost != 'soykaf'

if debug
  Bundler.require(:default, :development)
else
  Bundler.require(:default)
end

require 'active_support/core_ext/string/conversions'

plugins = Dir[ File.expand_path('../../plugins/*.rb', __FILE__) ].map do |rb|
  load rb
  File.basename(rb).sub(/\.rb$/,'').classify.constantize
end

channel = "#lanpartei"
nick = 'lanbert'

bot = Cinch::Bot.new do
  configure do |c|
    c.server          = "irc.freenode.org"
    c.nick            = debug ? "#{nick}_test" : nick
    c.channels        = [channel]
    c.verbose         = true
    c.plugins.plugins = plugins
  end
end

#Thread.new { listen to something }

bot.start
